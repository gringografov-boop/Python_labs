# Mini Shell Project

Мини-оболочка Python для управления файлами и каталогами. Проект разработан как лабораторная работа по Python.

## Описание

Интерактивная оболочка (shell), которая позволяет выполнять основные операции с файлами и каталогами через командную строку, аналогично bash/sh, но реализованная полностью на Python.

## Функциональность

### Основные команды :
- `ls [path] [-l]` - Список файлов в каталоге (с опциональным подробным выводом)
- `cd <path>` - Смена каталога (виртуально в рамках оболочки)
- `chdir <path>` - Смена каталога (системная смена через os.chdir)
- `mkdir <folder>` - Создание новой папки
- `rmdir <folder>` - Удаление папки
- `cat <file>` - Вывод содержимого файла
- `cp [-r] <src> <dst>` - Копирование файла или каталога
- `mv <src> <dst>` - Перемещение или переименование файла/каталога
- `rm [-r] <path>` - Удаление файла или каталога
- `zip source [name]`   - Создать ZIP архив
- `unzip archive [path]` - Распаковать ZIP
- `tar source [name]`    - Создать TAR.GZ архив
- `untar archive [path]` - Распаковать TAR.GZ
- `grep [-r] [-i] pattern [path]`
-   `-r`  рекурсивный поиск в подкаталогах
-   `-i`  игнорировать регистр
- `history [count]`      - Показать последние N команд (по умолчанию 10)
- `undo`                 - Отменить последнюю операцию (cp/mv/rm)
- `help`                 - Эта справка
- `exit`                 - Выход из программы
### Дополнительные команды:
- `help` - Справка по всем командам
- `exit` - Выход из программы

## Требования

- Python 3.7+

## Структура проекта

```
mini_shell_project/
├── main.py                  # Точка входа (главный файл)
├── requirements.txt         # Зависимости проекта
├── README.md               # Этот файл
├── .gitignore              # Исключения для git
│
├── src/                     # Исходный код
│   ├── __init__.py         # Инициализация пакета
│   ├── commands.py         # Реализация всех команд (класс MiniShell)
│   ├── logger.py           # Система логирования команд
│   └── utils.py            # Вспомогательные функции
│
└── tests/                   # Автоматические тесты
    ├── __init__.py
    ├── test_commands.py    # Тесты для команд
    └── test_utils.py       # Тесты для утилит
```

## Примеры использования

### Навигация по файловой системе
```bash
shell:home> cd Desktop
shell:Desktop> pwd
/home/user/Desktop
shell:Desktop> cd ..
shell:home> 
```

### Работа с файлами
```bash
shell:home> cat file.txt
Содержимое файла

shell:home> cp file.txt backup.txt
Скопировано: file.txt → backup.txt

shell:home> mv backup.txt archive.txt
Перемещено: backup.txt → archive.txt

shell:home> rm archive.txt
Удалено: archive.txt
```

### Работа с папками
```bash
shell:home> mkdir projects
Создано: projects

shell:home> cp -r projects projects_backup
Скопировано: projects → projects_backup

shell:home> rmdir projects_backup
Удалено: projects_backup
```

### Детальный вывод файлов
```bash
shell:home> ls -l
      1024 2025-11-05 14:30 Documents
      2048 2025-11-05 14:25 Desktop
      4096 2025-11-05 13:15 Downloads
```

## Запуск тестов

Используй unittest для запуска тестов:

```bash
python -m unittest discover -s tests -p "test_*.py"
```

или используй pytest:

```bash
pip install pytest
pytest tests/
```

### Отдельные тесты:

```bash
python -m unittest tests.test_utils
python -m unittest tests.test_commands
```

## Логирование

Все команды и ошибки автоматически записываются в файл `shell.log`:

```
[2025-11-05 14:30:45] ls -l .
[2025-11-05 14:30:47] mkdir projects
[2025-11-05 14:30:50] cd projects
[2025-11-05 14:30:52] cat file.txt
```

## Особенности реализации

- **Безопасность**: Защита от удаления системных каталогов
- **Логирование**: Все операции записываются в `shell.log`
- **Обработка ошибок**: Корректная обработка исключений для всех операций
- **Поддержка путей**: Работает с относительными и абсолютными путями
- **Специальные пути**: Поддержка `~` (домашний каталог) и `..` (родительский каталог)

## Различие между `cd` и `chdir`

- **`cd <path>`** - Изменяет текущий каталог только в рамках оболочки (виртуально). После выхода из программы текущий каталог не изменится.

- **`chdir <path>`** - Использует `os.chdir()` для системного изменения текущего рабочего каталога процесса Python. Это влияет на все последующие операции файловой системы.

## Тестирование

Проект включает полный набор юнит-тестов:

### test_utils.py
- Тестирование функций разрешения путей
- Проверка безопасности путей
- Тестирование получения информации о файлах

### test_commands.py
- Тестирование создания/удаления папок
- Тестирование копирования и перемещения файлов
- Тестирование удаления файлов
- Тестирование навигации по каталогам

## Файлы проекта

| Файл | Назначение |
|------|-----------|
| main.py | Точка входа, создаёт экземпляр MiniShell и запускает |
| src/commands.py | Класс MiniShell со всеми методами команд |
| src/logger.py | Функции логирования команд |
| src/utils.py | Вспомогательные функции для работы с путями |
| tests/test_commands.py | Тесты для команд |
| tests/test_utils.py | Тесты для утилит |
| .gitignore | Исключения для git |
| requirements.txt | Зависимости (пусто, т.к. используются встроенные модули) |

## Как запустить проект

1. **Скачай файлы проекта**
2. **Положи их в одну папку `mini_shell_project`**
3. **Открой терминал в этой папке**
4. **Запусти:** `python main.py`


